(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{718:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(4),i=n(2),c=n(1),l=n(725),u=n.n(l);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var d=function(e){function t(){var e,n,r,a,o,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];return r=this,n=!(a=(e=f(t)).call.apply(e,[this].concat(u)))||"object"!==s(a)&&"function"!=typeof a?y(r):a,o=y(y(n)),c=null,(i="container")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentWillUnmount",value:function(){null!==this.container&&(this.container.destroy(),this.container=null)}},{key:"redraw",value:function(){alert("not yet implemented")}},{key:"componentDidUpdate",value:function(){this.redraw()}},{key:"componentDidMount",value:function(){this.redraw()}}])&&p(n.prototype,r),o&&p(n,o),t}();function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function E(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=600,k=100,P=3;var T=function(e){function t(){return g(this,t),E(this,j(t).apply(this,arguments))}return _(t,d),O(t,[{key:"redraw",value:function(){this.container=function(e,t,n){function r(e){var t=e.budgetDate;return"".concat(t.getFullYear()," - ").concat(t.getMonth())}for(var a={},o=new Map,i=new Map,l=0;l<t.length;l++){var s=t[l],p=r(s);o.set(p,o.get(p)||[0,0,0]);var f=o.get(p);f[0]+=s.amount>0?s.amount:0,f[1]+=s.amount<0?-s.amount:0,f[2]+=s.amount,i.set(p,+s.budgetDate)}var h=Array.from(i);h.sort(function(e,t){return e[1]-t[1]});var y=[];function d(e,t,n){for(var r=[],i=0;i<h.length;i++){var l=h[i][0];r.push(Object(c.s)(o.get(l)[t]))}var u=[e].concat(r);y.push(u),a[e]=n}var m=Object(c.p)(n);d(Object(c.v)("client.charts.received"),0,m.RECEIVED),d(Object(c.v)("client.charts.spent"),1,m.SPENT),d(Object(c.v)("client.charts.saved"),2,m.SAVED);for(var b=[],v=0;v<h.length;v++){var g=new Date(h[v][1]).toLocaleDateString(void 0,{year:"2-digit",month:"short"});b.push(g)}var w=Math.max(h.length,P)-P,O=h.length,E=Object(c.v)("client.charts.amount");return u.a.generate({bindto:e,data:{columns:y,type:"bar",colors:a},bar:{width:{ratio:.5}},axis:{x:{type:"category",extent:[w,O],categories:b,tick:{fit:!1}},y:{label:E}},grid:{x:{show:!0},y:{show:!0,lines:[{value:0}]}},size:{height:C},subchart:{show:!0,size:{height:k}},zoom:{rescale:!0}})}("#".concat(this.props.chartId),this.props.operations,this.props.theme)}},{key:"render",value:function(){return a.a.createElement("div",{id:this.props.chartId,style:{width:"100%"}})}}]),t}(),A="",x=function(e){function t(e){var n,r,a,o;return g(this,t),n=E(this,j(t).call(this,e)),r=S(S(n)),o=function(e){n.setState({currency:e.target.value})},(a="handleCurrencyChange")in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o,n.state={currency:A},n}return _(t,a.a.Component),O(t,[{key:"render",value:function(){var e=[],t=[],n=!0,r=!1,o=void 0;try{for(var i,l=this.props.currencyToTransactions[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=b(i.value,2),s=u[0],p=u[1];if(e.push(a.a.createElement("option",{key:s,value:s},s)),this.state.currency===A||this.state.currency===s){var f=null;this.state.currency===A&&(f=a.a.createElement("h3",null,s)),t.push(a.a.createElement("div",{key:s},f,a.a.createElement(T,{chartId:"barchart-".concat(s),operations:p,theme:this.props.theme})))}}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}var h=null;return e.length>1&&(h=a.a.createElement("p",null,a.a.createElement("select",{className:"form-element-block",onChange:this.handleCurrencyChange,defaultValue:this.state.currency},a.a.createElement("option",{value:A},Object(c.v)("client.charts.all_currencies")),e))),a.a.createElement(a.a.Fragment,null,h,t)}}]),t}(),B=Object(o.b)(function(e,t){var n=i.b.accountIdsByAccessId(e,t.accessId),r=new Map,a=!0,o=!1,c=void 0;try{for(var l,u=n[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var s,p=l.value,f=i.b.accountById(e,p).currency;r.has(f)||r.set(f,[]);var h=i.b.operationsByAccountId(e,p);(s=r.get(f)).push.apply(s,m(h))}}catch(e){o=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw c}}return{currencyToTransactions:r,theme:i.b.setting(e,"theme")}})(x),N=n(733);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var V=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),R(this,M(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,d),n=t,(r=[{key:"redraw",value:function(){this.container=function(e,t,n,r){if(null!==t){var a=n.slice().sort(function(e,t){return+e.date-+t.date}),o=new Map,i=864e5,l=a.length?+a[0].date:Date.now();l=(l/i|0)*i;for(var u=(Date.now()/i|0)*i;l<=u;l+=i)o.set(C(new Date(l)),0);var s=!0,p=!1,f=void 0;try{for(var h,y=a[Symbol.iterator]();!(s=(h=y.next()).done);s=!0){var d=h.value,m=C(d.date);o.has(m)&&o.set(m,o.get(m)+d.amount)}}catch(e){p=!0,f=e}finally{try{s||null==y.return||y.return()}finally{if(p)throw f}}var b=t.initialAmount,v="Date,Balance\n",g=!0,w=!1,O=void 0;try{for(var E,S=o[Symbol.iterator]();!(g=(E=S.next()).done);g=!0){var j=H(E.value,2),_=j[0];b+=j[1],v+="".concat(_,",").concat(Object(c.s)(b),"\n")}}catch(e){w=!0,O=e}finally{try{g||null==S.return||S.return()}finally{if(w)throw O}}var I=Object(c.o)(r);return new N.a(document.querySelector(e),v,{color:I.LINES,axisLineColor:I.AXIS,axes:{x:{axisLabelFormatter:function(e){return e.toLocaleDateString(void 0,{year:"2-digit",month:"short"})}}},fillGraph:!0,showRangeSelector:!0,rangeSelectorPlotFillGradientColor:I.LINES,rangeSelectorPlotStrokeColor:I.LINES,dateWindow:[u-15552e6,u],gridLinePattern:[4,2]})}function C(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())}Object(c.k)("ChartComponent: no account")}("#barchart",this.props.account,this.props.operations,this.props.theme)}},{key:"render",value:function(){return a.a.createElement("div",{id:"barchart",style:{width:"100%"}})}}])&&D(n.prototype,r),o&&D(n,o),t}(),Y=n(3),L=n.n(Y);function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t,n){return t&&U(e.prototype,t),n&&U(e,n),e}function X(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var te=function(e){return a.a.createElement("select",{className:"form-element-block",defaultValue:e.defaultValue,onChange:function(t){e.onChange(t.target.value)},id:e.htmlId},a.a.createElement("option",{key:"value",value:"all"},Object(c.v)("client.charts.all_periods")),a.a.createElement("option",{key:"current-month",value:"current-month"},Object(c.v)("client.charts.current_month")),a.a.createElement("option",{key:"last-month",value:"last-month"},Object(c.v)("client.charts.last_month")),a.a.createElement("option",{key:"3-months",value:"3-months"},Object(c.v)("client.charts.three_months")),a.a.createElement("option",{key:"6-months",value:"6-months"},Object(c.v)("client.charts.six_months")))},ne=function(e){return a.a.createElement("select",{className:"form-element-block",defaultValue:e.defaultValue,onChange:function(t){e.onChange(t.target.value)}},a.a.createElement("option",{key:"all",value:"all"},Object(c.v)("client.charts.incomes_and_expenses")),a.a.createElement("option",{key:"positive",value:"positive"},Object(c.v)("client.charts.incomes")),a.a.createElement("option",{key:"negative",value:"negative"},Object(c.v)("client.charts.expenses")))},re=function(e){function t(){return J(this,t),X(this,Z(t).apply(this,arguments))}return $(t,d),W(t,[{key:"hide",value:function(){this.container.hide()}},{key:"show",value:function(){this.container.show()}},{key:"render",value:function(){return a.a.createElement("div",{id:this.props.chartId})}}]),t}();re.propTypes={chartId:L.a.string.isRequired};var ae=function(e){function t(){return J(this,t),X(this,Z(t).apply(this,arguments))}return $(t,re),W(t,[{key:"datekey",value:function(e){var t=e.budgetDate;return"".concat(t.getFullYear(),"-").concat(t.getMonth())}},{key:"redraw",value:function(){var e=new Map,t={},n=new Map,r=!0,a=!1,o=void 0;try{for(var i,l=this.props.operations[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var s=i.value,p=this.props.getCategoryById(s.categoryId);e.set(p.title,e.get(p.title)||{});var f=e.get(p.title),h=this.datekey(s),y=this.props.invertSign?-s.amount:s.amount;(f[h]=f[h]||[]).push(y),n.set(h,+s.budgetDate),t[p.title]=t[p.title]||p.color}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}var d=Array.from(n);d.sort(function(e,t){return e[1]-t[1]});var m=[],b=!0,v=!1,g=void 0;try{for(var w,O=e.keys()[Symbol.iterator]();!(b=(w=O.next()).done);b=!0){for(var E=w.value,S=[],j=0;j<d.length;j++){var _=d[j][0],I=e.get(E)[_]=e.get(E)[_]||[];S.push(Object(c.s)(I.reduce(function(e,t){return e+t},0)))}S=[E].concat(S),m.push(S)}}catch(e){v=!0,g=e}finally{try{b||null==O.return||O.return()}finally{if(v)throw g}}for(var C=[],k=0;k<d.length;k++){var P=new Date(d[k][1]).toLocaleDateString(void 0,{year:"2-digit",month:"short"});C.push(P)}var T=Object(c.v)("client.charts.amount");this.container=u.a.generate({bindto:"#".concat(this.props.chartId),size:{height:600},data:{columns:m,type:"bar",colors:t},bar:{width:{ratio:.5}},axis:{x:{type:"category",categories:C,tick:{fit:!1},extent:[C.length-Math.min(this.props.period,C.length),C.length]},y:{label:T}},grid:{x:{show:!0},y:{show:!0,lines:[{value:0}]}},subchart:{show:!0,size:{height:80}},transition:{duration:0},zoom:{rescale:!0}})}}]),t}();ae.propTypes={getCategoryById:L.a.func.isRequired,operations:L.a.array.isRequired,invertSign:L.a.bool.isRequired};var oe=function(e){function t(){return J(this,t),X(this,Z(t).apply(this,arguments))}return $(t,re),W(t,[{key:"redraw",value:function(){var e=new Map,t=!0,n=!1,r=void 0;try{for(var a,o=this.props.operations[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value,l=i.categoryId;e.has(l)||e.set(l,[]),e.get(l).push(i.amount)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}var s=[],p={},f=!0,h=!1,y=void 0;try{for(var d,m=e[Symbol.iterator]();!(f=(d=m.next()).done);f=!0){var b=z(d.value,2),v=b[0],g=b[1],w=this.props.getCategoryById(v);s.push([w.title].concat(g)),p[w.title]=w.color}}catch(e){h=!0,y=e}finally{try{f||null==m.return||m.return()}finally{if(h)throw y}}this.container=u.a.generate({bindto:"#".concat(this.props.chartId),data:{columns:s,type:"pie",colors:p},tooltip:{format:{value:function(e,t){return"".concat(Object(c.s)(100*t),"% (").concat(Math.abs(Object(c.s)(e)),")")}}}})}}]),t}();oe.propTypes={getCategoryById:L.a.func.isRequired,operations:L.a.array.isRequired};var ie=function(e){function t(){var e,n;J(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return q(Q(Q(n=X(this,(e=Z(t)).call.apply(e,[this].concat(o))))),"state",{displayHelp:!1}),q(Q(Q(n)),"ref",a.a.createRef()),q(Q(Q(n)),"show",function(){n.ref.current.show()}),q(Q(Q(n)),"hide",function(){n.ref.current.hide()}),q(Q(Q(n)),"handleToggleHelp",function(){n.setState({displayHelp:!n.state.displayHelp})}),q(Q(Q(n)),"render",function(){var e=n.state.displayHelp?a.a.createElement("div",{className:"alerts info"},Object(c.v)(n.props.helpKey)):null;return a.a.createElement("div",null,a.a.createElement("h3",null,Object(c.v)(n.props.titleKey),a.a.createElement("button",{className:"btn info",onClick:n.handleToggleHelp,title:Object(c.v)("client.charts.help")},a.a.createElement("span",{className:"fa fa-question"}))),e,a.a.createElement(oe,{chartId:n.props.chartId,getCategoryById:n.props.getCategoryById,operations:n.props.ops,ref:n.ref}))}),n}return $(t,a.a.Component),t}(),ce=function(e){function t(){var e,n;J(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return q(Q(Q(n=X(this,(e=Z(t)).call.apply(e,[this].concat(o))))),"state",{displayRawIncomeHelp:!1,displayRawSpendingsHelp:!1,displayNetIncomeHelp:!1,displayNetSpendingsHelp:!1}),q(Q(Q(n)),"refRawIncome",a.a.createRef()),q(Q(Q(n)),"refRawSpendings",a.a.createRef()),q(Q(Q(n)),"refNetIncome",a.a.createRef()),q(Q(Q(n)),"refNetSpendings",a.a.createRef()),q(Q(Q(n)),"show",function(){n.refRawIncome.current.show(),n.refRawSpendings.current.show(),n.refNetIncome.current.show(),n.refNetSpendings.current.show()}),q(Q(Q(n)),"hide",function(){n.refRawIncome.current.hide(),n.refRawSpendings.current.hide(),n.refNetIncome.current.hide(),n.refNetSpendings.current.hide()}),q(Q(Q(n)),"render",function(){return a.a.createElement("div",{className:"pie-charts"},a.a.createElement(ie,{chartId:"rawIncomePie",helpKey:"client.charts.help_raw_income",titleKey:"client.charts.raw_income",getCategoryById:n.props.getCategoryById,ops:n.props.rawIncomeOps,ref:n.refRawIncome}),a.a.createElement(ie,{chartId:"rawSpendingsPie",helpKey:"client.charts.help_raw_spendings",titleKey:"client.charts.raw_spendings",getCategoryById:n.props.getCategoryById,ops:n.props.rawSpendingOps,ref:n.refRawSpendings}),a.a.createElement(ie,{chartId:"netIncomePie",helpKey:"client.charts.help_net_income",titleKey:"client.charts.net_income",getCategoryById:n.props.getCategoryById,ops:n.props.netIncomeOps,ref:n.refNetIncome}),a.a.createElement(ie,{chartId:"netSpendingsPie",helpKey:"client.charts.help_net_spendings",titleKey:"client.charts.net_spendings",getCategoryById:n.props.getCategoryById,ops:n.props.netSpendingOps,ref:n.refNetSpendings}))}),n}return $(t,a.a.Component),t}(),le=function(e){function t(e){var n;return J(this,t),q(Q(Q(n=X(this,Z(t).call(this,e)))),"refBarchart",a.a.createRef()),q(Q(Q(n)),"refPiecharts",a.a.createRef()),q(Q(Q(n)),"handleChangePeriod",function(e){n.setState({period:e})}),q(Q(Q(n)),"handleChangeAmountKind",function(e){n.setState({amountKind:e})}),q(Q(Q(n)),"createPeriodFilter",function(e){var t,n=new Date,r=n.getFullYear(),a=n.getMonth();switch(e){case"all":return function(){return!0};case"current-month":return function(e){return e.getMonth()===a&&e.getFullYear()===r};case"last-month":return t=a>0?a-1:11,r=a>0?r:r-1,function(e){return e.getMonth()===t&&e.getFullYear()===r};case"3-months":return a>=3?(t=a-3,function(e){return e.getMonth()>=t&&e.getFullYear()===r}):(t=(a+9)%12,function(e){return e.getMonth()>=t&&e.getFullYear()===r-1||e.getMonth()<=a&&e.getFullYear()===r});case"6-months":return a>=6?(t=a-6,function(e){return e.getMonth()>=t&&e.getFullYear()===r}):(t=(a+6)%12,function(e){return e.getMonth()>=t&&e.getFullYear()===r-1||e.getMonth()<=a&&e.getFullYear()===r});default:Object(c.f)(!1,"unexpected option for date filter")}}),q(Q(Q(n)),"handleShowAll",function(){n.refBarchart.current.show(),n.refPiecharts.current.show()}),q(Q(Q(n)),"handleHideAll",function(){n.refBarchart.current.hide(),n.refPiecharts.current.hide()}),n.state={amountKind:e.defaultAmountKind,period:e.defaultPeriod},n}return $(t,a.a.Component),W(t,[{key:"render",value:function(){var e=this.props.operations,t=this.createPeriodFilter(this.state.period),n=e.filter(function(e){return t(e.budgetDate)}),r="positive"===this.state.amountKind,o="negative"===this.state.amountKind;o?n=n.filter(function(e){return e.amount<0}):r&&(n=n.filter(function(e){return e.amount>0}));var i=null;if(r||o)i=a.a.createElement(oe,{chartId:"piechart",getCategoryById:this.props.getCategoryById,operations:n,ref:this.refPiecharts});else{var l=n.filter(function(e){return e.amount>0}),u=n.filter(function(e){return e.amount<0}),s=new Map,p=!0,f=!1,h=void 0;try{for(var y,d=n[Symbol.iterator]();!(p=(y=d.next()).done);p=!0){var m=y.value;s.has(m.categoryId)||s.set(m.categoryId,[]),s.get(m.categoryId).push(m)}}catch(e){f=!0,h=e}finally{try{p||null==d.return||d.return()}finally{if(f)throw h}}var b=[],v=[],g=!0,w=!1,O=void 0;try{for(var E,S=s.values()[Symbol.iterator]();!(g=(E=S.next()).done);g=!0){var j=E.value;j.reduce(function(e,t){return e+t.amount},0)>0?b=b.concat(j):v=v.concat(j)}}catch(e){w=!0,O=e}finally{try{g||null==S.return||S.return()}finally{if(w)throw O}}i=a.a.createElement(ce,{getCategoryById:this.props.getCategoryById,rawIncomeOps:l,netIncomeOps:b,rawSpendingOps:u,netSpendingOps:v,ref:this.refPiecharts})}var _=0;switch(this.state.period){case"current-month":_=0;break;case"last-month":_=1;break;case"3-months":_=3;break;default:_=6}return a.a.createElement(a.a.Fragment,null,a.a.createElement("form",null,a.a.createElement("p",null,a.a.createElement("label",null,Object(c.v)("client.charts.amount_type")),a.a.createElement(ne,{defaultValue:this.state.amountKind,onChange:this.handleChangeAmountKind})),a.a.createElement("p",null,a.a.createElement("label",{htmlFor:"period"},Object(c.v)("client.charts.period")),a.a.createElement(te,{defaultValue:this.props.defaultPeriod,onChange:this.handleChangePeriod,htmlId:"period"})),a.a.createElement("div",null,a.a.createElement("label",null,Object(c.v)("client.menu.categories")),a.a.createElement("p",{className:"buttons-group",role:"group","aria-label":"Show/Hide categories"},a.a.createElement("button",{type:"button",className:"btn",onClick:this.handleHideAll},Object(c.v)("client.general.unselect_all")),a.a.createElement("button",{type:"button",className:"btn",onClick:this.handleShowAll},Object(c.v)("client.general.select_all"))))),a.a.createElement(ae,{operations:e,getCategoryById:this.props.getCategoryById,invertSign:o,chartId:"barchart",ref:this.refBarchart,period:_}),i)}}]),t}(),ue=Object(o.b)(function(e){return{defaultAmountKind:i.b.setting(e,"default-chart-type"),defaultPeriod:i.b.setting(e,"default-chart-period"),getCategoryById:function(t){return i.b.categoryById(e,t)}}})(le),se=n(8),pe=n(9),fe=n(41);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge="charts-default-params",we=Object(o.b)(function(e){return{amountKind:i.b.setting(e,"default-chart-type"),displayType:i.b.setting(e,"default-chart-display-type"),period:i.b.setting(e,"default-chart-period")}},function(e){return{setAmountKind:function(t){i.a.setSetting(e,"default-chart-type",t)},setDisplayType:function(t){i.a.setSetting(e,"default-chart-display-type",t)},setPeriod:function(t){i.a.setSetting(e,"default-chart-period",t)},handleClose:function(){i.a.hideModal(e)}}})(function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=de(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==he(a)&&"function"!=typeof a?be(r):a,ve(be(be(n)),"state",{isSubmitDisabled:!0,amountKind:n.props.amountKind,displayType:n.props.displayType,period:n.props.period}),ve(be(be(n)),"handleSubmit",function(){n.state.amountKind!==n.props.amountKind&&n.props.setAmountKind(n.state.amountKind),n.state.displayType!==n.props.displayType&&n.props.setDisplayType(n.state.displayType),n.state.period!==n.props.period&&n.props.setPeriod(n.state.period),n.props.handleClose()}),ve(be(be(n)),"handleDisplayTypeChange",function(e){n.setState({displayType:e.target.value})}),ve(be(be(n)),"handlePeriodChange",function(e){n.setState({period:e})}),ve(be(be(n)),"handleChangeAmountKind",function(e){n.setState({amountKind:e})}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,a.a.Component),n=t,(r=[{key:"isSubmitDisabled",value:function(){return this.state.amountKind===this.props.amountKind&&this.state.displayType===this.props.displayType&&this.state.period===this.props.period}},{key:"render",value:function(){var e=a.a.createElement("form",{id:ge,onSubmit:this.handleSubmit},a.a.createElement("div",{className:"cols-with-label"},a.a.createElement("label",{htmlFor:"defaultDisplayType"},Object(c.v)("client.charts.default_display")),a.a.createElement("select",{className:"form-element-block",id:"defaultDisplayType",onChange:this.handleDisplayTypeChange,defaultValue:this.state.displayType},a.a.createElement("option",{value:"all"},Object(c.v)("client.charts.by_category")),a.a.createElement("option",{value:"balance"},Object(c.v)("client.charts.balance")),a.a.createElement("option",{value:"earnings"},Object(c.v)("client.charts.differences_all")))),a.a.createElement("h5",null,Object(c.v)("client.charts.category_chart")),a.a.createElement("div",{className:"cols-with-label",id:"default-params"},a.a.createElement("label",null,Object(c.v)("client.charts.default_amount_type")),a.a.createElement(ne,{defaultValue:this.state.amountKind,onChange:this.handleChangeAmountKind})),a.a.createElement("div",{className:"cols-with-label"},a.a.createElement("label",{htmlFor:"defaultChartPeriod"},Object(c.v)("client.charts.default_period")),a.a.createElement(te,{defaultValue:this.state.period,onChange:this.handlePeriodChange,htmlId:"defaultChartPeriod"}))),t=a.a.createElement(fe.a,{isSubmitDisabled:this.isSubmitDisabled(),formId:ge});return a.a.createElement(pe.a,{title:Object(c.v)("client.general.default_parameters"),body:e,footer:t})}}])&&ye(n.prototype,r),o&&ye(n,o),t}());Object(se.b)(ge,function(){return a.a.createElement(we,null)});var Oe=n(295);function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=Object(o.b)(null,function(e){return{handleClick:function(){i.a.showModal(e,ge)}}})(function(e){return a.a.createElement("button",{className:"btn",onClick:e.handleClick},a.a.createElement("span",{className:"fa fa-cog"}),a.a.createElement("span",null,Object(c.v)("client.general.default_parameters")))}),Pe=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=this,o=(e=je(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==Ee(o)&&"function"!=typeof o?Ie(r):o,Ce(Ie(Ie(n)),"makeAllChart",function(){return a.a.createElement(ue,{operations:n.props.operations})}),Ce(Ie(Ie(n)),"makeBalanceChart",function(){return a.a.createElement(V,{operations:n.props.operations,account:n.props.account,theme:n.props.theme})}),Ce(Ie(Ie(n)),"makePosNegChart",function(){return a.a.createElement(B,{accessId:n.props.account.bankAccess})}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.match.params.currentAccountId,t=new Map;t.set("".concat("/charts","/all/").concat(e),{name:Object(c.v)("client.charts.by_category"),component:this.makeAllChart}),t.set("".concat("/charts","/balance/").concat(e),{name:Object(c.v)("client.charts.balance"),component:this.makeBalanceChart}),t.set("".concat("/charts","/earnings/").concat(e),{name:Object(c.v)("client.charts.differences_all"),component:this.makePosNegChart});var n=this.props.defaultDisplay;return a.a.createElement("div",{className:"charts"},a.a.createElement("p",{className:"buttons-toolbar"},a.a.createElement(ke,null)),a.a.createElement(Oe.a,{tabs:t,defaultTab:"".concat("/charts","/").concat(n,"/").concat(e),selectedTab:this.props.location.pathname,history:this.props.history,location:this.props.location}))}}])&&Se(n.prototype,r),o&&Se(n,o),t}(),Te=Object(o.b)(function(e,t){var n=t.match.params.currentAccountId,r=i.b.accountById(e,n),a=i.b.operationsByAccountId(e,n);return{defaultDisplay:i.b.setting(e,"default-chart-display-type"),account:r,operations:a,theme:i.b.setting(e,"theme")}})(Pe);t.default=Te}}]);